<!DOCTYPE html> 
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Text Wizard</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
   <style>
    :root{
      --bg: #9ab3ff;
      --fg: #5d62ffc2;
      --card: #fff;
      --muted: #666;
      --accent: #ff362c;
      --shadow: rgba(0,0,0,0.06);
    }
    body{
      font-family: Arial, Helvetica, sans-serif;
      background: var(--bg);
      color: var(--fg);
      margin: 0;
      padding: 28px;
      text-align: center;
    }

    header.site-header{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      padding:12px 0 18px 0;
      position:relative;
    }
    header{ max-width: 900px; margin: 0 auto 18px auto; }
    nav { margin-bottom: 18px; }
    nav a {
      color: var(--accent);
      text-decoration: none;
      margin: 0 8px;
      font-weight: 600;
      padding:6px 10px;
      border-radius:8px;
      transition: all .15s ease;
      background: transparent;
    }
    nav a[aria-current="page"]{ background: rgba(107,68,0,0.08); }
    nav a:hover{ transform:translateY(-2px); box-shadow: 0 4px 12px rgba(107,68,0,0.06); }


    .title-text{ line-height:1; transform: translateY(-2px); }

    .card {
      display: inline-block;
      width: 92%;
      max-width: 980px;
      background: var(--card);
      border-radius: 8px;
      padding: 18px;
      box-shadow: 0 1px 6px var(--shadow);
      text-align: left;
    }
    .brand-title{
      display:flex;
      align-items:center;
      gap:10px;
      font-weight:800;
      font-family: 'Palatino', 'Georgia', serif;
      color:var(--accent);
      font-size:var(--brand-size);
      text-decoration:none;
      text-shadow: 0 1px 0 rgba(255,255,255,0.5);
    }


    h1 { margin: 4px 0 8px 0; font-size: 22px; }
    p.lead { color: var(--muted); margin-top: 0; }
    label { display:block; margin-top: 12px; font-weight:600; color:var(--accent); }
    textarea { width:100%; height:120px; font-size:16px; padding:10px; border-radius:6px; border:1px solid #ddd; box-sizing:border-box; resize:vertical; }
    .controls { margin-top:12px; display:flex; gap:8px; flex-wrap:wrap; }
    button, .select, input[type="range"] {
      padding:8px 12px;
      border-radius:6px;
      border:1px solid #ccc;
      background:#fff;
      cursor:pointer;
      font-size:14px;
    }
    .inline {
      display:inline-flex; align-items:center; gap:8px;
    }
    .output {
      margin-top:14px;
      padding:12px;
      min-height:60px;
      font-size:18px;
      background:#fafafa;
      border-radius:6px;
      white-space:pre-wrap;
      word-break:break-word;
      box-shadow:0 1px 3px var(--shadow);
    }
    .meta { margin-top:10px; color:var(--muted); font-size:13px; }
    .debug { margin-top:8px; color:#b33; font-size:13px; }
    footer { margin-top:12px; color:var(--muted); font-size:13px; }
   @media (max-width:600px){
     .controls { flex-direction:column; }
     button { width:100%; }
   }

  </style>
</head>
<body>
  <div class="wrap">
    <header class="site-header">
      <div class="brand-title">
        <span class="title-text">Text Wizard</span>
      </div>
      <nav aria-label="Main navigation">
        <a href="index.html"aria-current="page">Text → Emoji</a>
        <a href="morse.html">Morse ←→ Text</a>
        <a href="weird.html">Text → Weird Text</a>
        <a href="cursed.html" >Text → Cursed Text</a>
      </nav>
    </header>
  <h1>Text-to-Emoji Translator</h1>
  <p>Type text and click <strong>Translate</strong> (or press <em>Ctrl/Cmd + Enter</em>)</p>

  <textarea id="inputText" placeholder="Try: I love pizza and my cat."></textarea><br>
  <button id="translateBtn">Translate</button>

  <div class="output" id="output">Translated text will appear here.</div>
  <div class="debug" id="debug" aria-live="polite"></div>
  <div class="hint">Tip: punctuation (like . , ! ?) is handled — try "The sun, moon, and stars!"</div>

  <script>
  // -------------------------
  // emojiMap: word (lowercase) => emoji
  let emojiMap = {};
  const btn = document.getElementById('translateBtn');
  btn.disabled = true; // disable at start

  fetch("text_to_emoji.json")
    .then(response => response.json())
    .then(data => {
      data.forEach(item => {
        // use full name instead of just first word for better matches
        let key = item.name.toLowerCase();
        emojiMap[key] = item.char;
      });
      btn.disabled = false; // enable after loading
      console.log("Emoji map loaded:", Object.keys(emojiMap).length, "entries");
    })
    .catch(err => console.error("Failed to load emoji dictionary:", err));

  // Helpful small helper to show debug messages on the page
  function showDebug(msg, isError = true) {
    const el = document.getElementById('debug');
    el.textContent = msg || '';
    if (isError && msg) console.error(msg);
    else if (msg) console.log(msg);
  }

  // Translation function
  function translate(text) {
    // split into words while keeping punctuation as tokens
    let tokens = text.toLowerCase().split(/(\b|\s+)/);
    let translated = tokens.map(tok => {
      let clean = tok.replace(/[.,!?]/g, ""); // strip punctuation for lookup
      return emojiMap[clean] || tok;
    });
    return translated.join("");
  }

  // wire up UI after DOM loads
  (function init() {
    try {
      const btn = document.getElementById('translateBtn');
      const input = document.getElementById('inputText');
      const output = document.getElementById('output');

      if (!btn || !input || !output) {
        showDebug('UI elements not found — check element ids in the HTML.', true);
        return;
      }

      // button click -> translate
      btn.addEventListener('click', () => {
        try {
          const raw = input.value.trim();
          const translated = translate(raw);
          output.textContent = translated || '(empty)';
          showDebug('', false); // clear debug on success
          console.log('Translated:', translated);
        } catch (err) {
          showDebug('Translate error: ' + err.message, true);
        }
      });

      // keyboard shortcut: Ctrl/Cmd + Enter to translate
      input.addEventListener('keydown', (e) => {
        if ((e.ctrlKey || e.metaKey) && e.key === 'Enter') {
          e.preventDefault();
          btn.click();
        }
      });

      // optional: auto-clear debug when user focuses input
      input.addEventListener('focus', () => { showDebug('', false); });

      console.log('Text-to-Emoji script loaded successfully.');
      showDebug('', false);
    } catch (err) {
      showDebug('Initialization failed: ' + err.message, true);
    }
  })();
</script>

</body>
</html>
